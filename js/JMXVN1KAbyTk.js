function check_likes_state(){return state=null,$.ajax({url:"/vote/like/info.php",dataType:"json",async:!1}).done(function(t){state=t.state,track_data=t.artist+" - "+t.track}).fail(function(){state=0}),state}function do_action(t){return $.ajax({url:"/vote/like/add.php",data:{action:t},method:"POST"}).done(function(t){state=t.state}).fail(function(){state=-2}),state}function display_likes(t){0!==t?$(".likesBlock").addClass("used"):($(".likesBlock").removeClass("used"),$(".likesBlock a").removeClass("active-now")),1==t?$("#like").addClass("active-now"):-1==t&&$("#dislike").addClass("active-now")}function update_track_info(){return ajax_state=check_likes_state(),display_likes(ajax_state),$(".progress span").text(track_data),ajax_state}var track_data,ajax_state=null;!function(t){t.fn.change_state=function(a){0==a?t(this).addClass("active-now"):t(this).removeClass("active-now")}}(jQuery),$(document).ready(function(){update_track_info(),$(".likes-buttons").click(function(){likes_state=$(".likesBlock").attr("class").split(/\s+/),2!=likes_state.length&&(do_action($(this).attr("id")),$(this).change_state(ajax_state),$(".likesBlock").addClass("used"))}),setInterval(update_track_info,25e3)});